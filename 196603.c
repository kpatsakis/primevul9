chdir_restore(VALUE v)
{
    struct chdir_data *args = (void *)v;
    if (args->done) {
	chdir_blocking--;
	if (chdir_blocking == 0)
	    chdir_thread = Qnil;
	dir_chdir(args->old_path);
    }
    return Qnil;
}